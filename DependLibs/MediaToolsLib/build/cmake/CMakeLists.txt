cmake_minimum_required(VERSION 3.12.2)

project(MediaToolsLib)

set(CMAKE_CONFIGURATION_TYPES "Debug"
    CACHE STRING "Configuration types" FORCE)

add_library(MediaToolsLib STATIC
  ../../../../base64.h
  ../../../../byteswap.h
  ../../../../dirent.h
  ../../../../dlfcn.h
  ../../../../GoTvCompilerConfig.h
  ../../../../GoTvConfig.h
  ../../../../GoTvCpuArchDefines.h
  ../../../../GoTvDependLibrariesConfig.h
  ../../../../GoTvFeaturesConfig.h
  ../../../../GoTvTargetOsConfig.h
  ../../../../langinfo.h
  ../../../../netdb.h
  ../../../../pwd.h
  ../../../../strings.h
  ../../../../syslog.h
  ../../../../unistd.h
  ../../../../utime.h
  ../../AviDefs.h
  ../../AviDefs_mtools.cpp
  ../../include/ogg/ogg.h
  ../../include/ogg/os_types.h
  ../../include/opus.h
  ../../include/opus_config.h
  ../../include/opus_custom.h
  ../../include/opus_defines.h
  ../../include/opus_multistream.h
  ../../include/opus_types.h
  ../../include/opus_version.h
  ../../MediaTools.h
  ../../MediaTools_mtools.cpp
  ../../MJPEGReader.h
  ../../MJPEGReader_mtools.cpp
  ../../MJPEGWriter.h
  ../../MJPEGWriter_mtools.cpp
  ../../MyOpusHeader.h
  ../../MyOpusHeader_mtools.cpp
  ../../ogg/bitwise_mtools.c
  ../../ogg/framing_mtools.c
  ../../OggBuffer.h
  ../../OggBuffer_mtools.cpp
  ../../OggStream.h
  ../../OggStream_mtools.cpp
  ../../opus/celt/_kiss_fft_guts.h
  ../../opus/celt/arch_celt.h
  ../../opus/celt/arm/arm_celt_map_mtools.c
  ../../opus/celt/arm/armcpu.h
  ../../opus/celt/arm/armcpu_mtools.c
  ../../opus/celt/arm/fixed_armv4.h
  ../../opus/celt/arm/fixed_armv5e.h
  ../../opus/celt/arm/kiss_fft_armv4.h
  ../../opus/celt/arm/kiss_fft_armv5e.h
  ../../opus/celt/arm/pitch_arm.h
  ../../opus/celt/bands.h
  ../../opus/celt/bands_mtools.c
  ../../opus/celt/celt.h
  ../../opus/celt/celt_decoder_mtools.c
  ../../opus/celt/celt_encoder_mtools.c
  ../../opus/celt/celt_lpc.h
  ../../opus/celt/celt_lpc_mtools.c
  ../../opus/celt/celt_mtools.c
  ../../opus/celt/cpu_support.h
  ../../opus/celt/cwrs.h
  ../../opus/celt/cwrs_mtools.c
  ../../opus/celt/ecintrin.h
  ../../opus/celt/entcode.h
  ../../opus/celt/entcode_mtools.c
  ../../opus/celt/entdec.h
  ../../opus/celt/entdec_mtools.c
  ../../opus/celt/entenc.h
  ../../opus/celt/entenc_mtools.c
  ../../opus/celt/fixed_debug.h
  ../../opus/celt/fixed_generic.h
  ../../opus/celt/float_cast.h
  ../../opus/celt/kiss_fft.h
  ../../opus/celt/kiss_fft_mtools.c
  ../../opus/celt/laplace.h
  ../../opus/celt/laplace_mtools.c
  ../../opus/celt/mathops.h
  ../../opus/celt/mathops_mtools.c
  ../../opus/celt/mdct.h
  ../../opus/celt/mdct_mediatools.c
  ../../opus/celt/mfrngcod.h
  ../../opus/celt/modes.h
  ../../opus/celt/modes_mtools.c
  ../../opus/celt/os_support.h
  ../../opus/celt/pitch.h
  ../../opus/celt/pitch_mtools.c
  ../../opus/celt/quant_bands.h
  ../../opus/celt/quant_bands_mtools.c
  ../../opus/celt/rate.h
  ../../opus/celt/rate_mtools.c
  ../../opus/celt/stack_alloc.h
  ../../opus/celt/static_modes_fixed.h
  ../../opus/celt/static_modes_float.h
  ../../opus/celt/vq.h
  ../../opus/celt/vq_mtools.c
  ../../opus/celt/x86/pitch_sse.h
  ../../opus/silk/A2NLSF_mtools.c
  ../../opus/silk/ana_filt_bank_1_mtools.c
  ../../opus/silk/API.h
  ../../opus/silk/biquad_alt_mtools.c
  ../../opus/silk/bwexpander_32.c
  ../../opus/silk/bwexpander_mtools_mtools.c
  ../../opus/silk/check_control_input_mtools.c
  ../../opus/silk/CNG_mtools.c
  ../../opus/silk/code_signs_mtools.c
  ../../opus/silk/control.h
  ../../opus/silk/control_audio_bandwidth_mtools.c
  ../../opus/silk/control_codec_mtools.c
  ../../opus/silk/control_SNR_mtools.c
  ../../opus/silk/debug.h
  ../../opus/silk/debug_mtools.c
  ../../opus/silk/dec_API_mtools.c
  ../../opus/silk/decode_core_mtools.c
  ../../opus/silk/decode_frame_mtools.c
  ../../opus/silk/decode_indices_mtools.c
  ../../opus/silk/decode_parameters_mtools.c
  ../../opus/silk/decode_pitch_mtools.c
  ../../opus/silk/decode_pulses_mtools.c
  ../../opus/silk/decoder_set_fs_mtools.c
  ../../opus/silk/define.h
  ../../opus/silk/enc_API_mtools.c
  ../../opus/silk/encode_indices_mtools.c
  ../../opus/silk/encode_pulses_mtools.c
  ../../opus/silk/errors.h
  ../../opus/silk/float/apply_sine_window_FLP_mtools.c
  ../../opus/silk/float/autocorrelation_FLP_mtools.c
  ../../opus/silk/float/burg_modified_FLP_mtools.c
  ../../opus/silk/float/bwexpander_FLP_mtools.c
  ../../opus/silk/float/corrMatrix_FLP_mtools.c
  ../../opus/silk/float/encode_frame_FLP_mtools.c
  ../../opus/silk/float/energy_FLP_mtools.c
  ../../opus/silk/float/find_LPC_FLP_mtools.c
  ../../opus/silk/float/find_LTP_FLP_mtools.c
  ../../opus/silk/float/find_pitch_lags_FLP_mtools.c
  ../../opus/silk/float/find_pred_coefs_FLP_mtools.c
  ../../opus/silk/float/inner_product_FLP_mtools.c
  ../../opus/silk/float/k2a_FLP_mtools.c
  ../../opus/silk/float/levinsondurbin_FLP_mtools.c
  ../../opus/silk/float/LPC_analysis_filter_FLP_mtools.c
  ../../opus/silk/float/LPC_inv_pred_gain_FLP_mtools.c
  ../../opus/silk/float/LTP_analysis_filter_FLP_mtools.c
  ../../opus/silk/float/LTP_scale_ctrl_FLP_mtools.c
  ../../opus/silk/float/main_FLP.h
  ../../opus/silk/float/noise_shape_analysis_FLP_mtools.c
  ../../opus/silk/float/pitch_analysis_core_FLP_mtools.c
  ../../opus/silk/float/prefilter_FLP_mtools.c
  ../../opus/silk/float/process_gains_FLP_mtools.c
  ../../opus/silk/float/regularize_correlations_FLP_mtools.c
  ../../opus/silk/float/residual_energy_FLP_mtools.c
  ../../opus/silk/float/scale_copy_vector_FLP_mtools.c
  ../../opus/silk/float/scale_vector_FLP_mtools.c
  ../../opus/silk/float/schur_FLP_mtools.c
  ../../opus/silk/float/SigProc_FLP.h
  ../../opus/silk/float/solve_LS_FLP_mtools.c
  ../../opus/silk/float/sort_FLP_mtools.c
  ../../opus/silk/float/structs_FLP.h
  ../../opus/silk/float/warped_autocorrelation_FLP_mtools.c
  ../../opus/silk/float/wrappers_FLP_mtools.c
  ../../opus/silk/gain_quant_mtools.c
  ../../opus/silk/HP_variable_cutoff_mtools.c
  ../../opus/silk/init_decoder_mtools.c
  ../../opus/silk/init_encoder_mtools.c
  ../../opus/silk/Inlines.h
  ../../opus/silk/inner_prod_aligned_mtools.c
  ../../opus/silk/interpolate_mtools.c
  ../../opus/silk/lin2log_mtools.c
  ../../opus/silk/log2lin_mtools.c
  ../../opus/silk/LP_variable_cutoff_mtools.c
  ../../opus/silk/LPC_analysis_filter_mtools.c
  ../../opus/silk/LPC_inv_pred_gain_mtools.c
  ../../opus/silk/MacroCount.h
  ../../opus/silk/MacroDebug.h
  ../../opus/silk/macros.h
  ../../opus/silk/main.h
  ../../opus/silk/NLSF_decode_mtools.c
  ../../opus/silk/NLSF_del_dec_quant_mtools.c
  ../../opus/silk/NLSF_encode_mtools.c
  ../../opus/silk/NLSF_stabilize_mtools.c
  ../../opus/silk/NLSF_unpack_mtools.c
  ../../opus/silk/NLSF_VQ_mtools.c
  ../../opus/silk/NLSF_VQ_weights_laroia_mtools.c
  ../../opus/silk/NLSF2A_mtools.c
  ../../opus/silk/NSQ_del_dec.c
  ../../opus/silk/NSQ_mtools.c
  ../../opus/silk/pitch_est_defines.h
  ../../opus/silk/pitch_est_tables_mtools.c
  ../../opus/silk/PLC.h
  ../../opus/silk/PLC_mtools.c
  ../../opus/silk/process_NLSFs_mtools.c
  ../../opus/silk/quant_LTP_gains_mtools.c
  ../../opus/silk/resampler_down2_3.c
  ../../opus/silk/resampler_down2_mtools.c
  ../../opus/silk/resampler_mtools.c
  ../../opus/silk/resampler_private.h
  ../../opus/silk/resampler_private_AR2_mtools.c
  ../../opus/silk/resampler_private_down_FIR_mtools.c
  ../../opus/silk/resampler_private_IIR_FIR_mtools.c
  ../../opus/silk/resampler_private_up2_HQ_mtools.c
  ../../opus/silk/resampler_rom.h
  ../../opus/silk/resampler_rom_mtools.c
  ../../opus/silk/resampler_structs.h
  ../../opus/silk/shell_coder_mtools.c
  ../../opus/silk/sigm_Q15_mtools.c
  ../../opus/silk/SigProc_FIX.h
  ../../opus/silk/sort_mtools.c
  ../../opus/silk/stereo_decode_pred_mtools.c
  ../../opus/silk/stereo_encode_pred_mtools.c
  ../../opus/silk/stereo_find_predictor_mtools.c
  ../../opus/silk/stereo_LR_to_MS_mtools.c
  ../../opus/silk/stereo_MS_to_LR_mtools.c
  ../../opus/silk/stereo_quant_pred_mtools.c
  ../../opus/silk/structs.h
  ../../opus/silk/sum_sqr_shift_mtools.c
  ../../opus/silk/table_LSF_cos_mtools.c
  ../../opus/silk/tables.h
  ../../opus/silk/tables_gain_mtools.c
  ../../opus/silk/tables_LTP_mtools.c
  ../../opus/silk/tables_NLSF_CB_NB_MB_mtools.c
  ../../opus/silk/tables_NLSF_CB_WB_mtools.c
  ../../opus/silk/tables_other_mtools.c
  ../../opus/silk/tables_pitch_lag_mtools.c
  ../../opus/silk/tables_pulses_per_block_mtools.c
  ../../opus/silk/tuning_parameters.h
  ../../opus/silk/typedef.h
  ../../opus/silk/VAD_mtools.c
  ../../opus/silk/VQ_WMat_EC_mtools.c
  ../../opus/src/analysis.h
  ../../opus/src/analysis_mtools.c
  ../../opus/src/mlp.h
  ../../opus/src/mlp_data_mtools.c
  ../../opus/src/mlp_mtools.c
  ../../opus/src/opus_decoder_mtools.c
  ../../opus/src/opus_encoder_mtools.c
  ../../opus/src/opus_mtools.c
  ../../opus/src/opus_multistream_decoder_mtools.c
  ../../opus/src/opus_multistream_encoder_mtools.c
  ../../opus/src/opus_multistream_mtools.c
  ../../opus/src/opus_private.h
  ../../opus/src/repacketizer_mtools.c
  ../../opus/src/tansig_table.h
  ../../opus/win32/config.h
  ../../opus/win32/opus_version.h
  ../../OpusAudioDecoder.h
  ../../OpusAudioDecoder_mtools.cpp
  ../../OpusAudioEncoder.h
  ../../OpusAudioEncoder_mtools.cpp
  ../../OpusCallbackInterface.h
  ../../OpusFileDecoder.h
  ../../OpusFileDecoder_mtools.cpp
  ../../OpusFileEncoder.h
  ../../OpusFileEncoder_mtools.cpp
  ../../OpusTools/arch.h
  ../../OpusTools/audio-in_mtools.c
  ../../OpusTools/cpusupport.h
  ../../OpusTools/diag_range.h
  ../../OpusTools/diag_range_mtools.c
  ../../OpusTools/flac.h
  ../../OpusTools/flac_mtools.c
  ../../OpusTools/include/getopt.h
  ../../OpusTools/lpc.h
  ../../OpusTools/lpc_mtools.c
  ../../OpusTools/opus_header.h
  ../../OpusTools/opus_header_mtools.c
  ../../OpusTools/opusdec_mtools.c
  ../../OpusTools/opusenc.h
  ../../OpusTools/opusenc_mtools.c
  ../../OpusTools/os_support.h
  ../../OpusTools/picture.h
  ../../OpusTools/picture_mtools.c
  ../../OpusTools/resample_mediatools.c
  ../../OpusTools/resample_sse.h
  ../../OpusTools/speex_resampler.h
  ../../OpusTools/stack_alloc.h
  ../../OpusTools/wav_io.h
  ../../OpusTools/wav_io_mtools.c
  ../../OpusTools/wave_out.h
  ../../OpusTools/wave_out_mtools.c
  ../../OpusTools/win32/config.h
  ../../OpusTools/win32/opus_version.h
  ../../OpusTools/win32/unicode_support.h
  ../../OpusTools/win32/unicode_support_mtools.c
  ../../SndDefs.h
  ../../SndDefs_mtools.cpp
  ../../SndReader.h
  ../../SndReader_mtools.cpp
  ../../SndWriter.h
  ../../SndWriter_mtools.cpp
)
# Output file name
set_target_properties(MediaToolsLib
  PROPERTIES
  OUTPUT_NAME_DEBUG MediaToolsLibD
)

# Additional include directories
set_property(TARGET MediaToolsLib
  APPEND PROPERTY INCLUDE_DIRECTORIES
  $<$<CONFIG:Debug>:
    ..\..\;
    ..\..\..\..\;
    ..\..\OpusTools\include;
    ..\..\include;
    ..\..\opus\win32;
    ..\..\opus\celt;
    ..\..\opus\silk;
    ..\..\opus\silk\float;
    ..\..\..\;
    ..\..\..\..\GuiInterface;
    ..\..\..\..\GoTvCore\NoLimitConnect>
)

# Preprocessor definitions
target_compile_definitions(MediaToolsLib PRIVATE
  $<$<CONFIG:Debug>:_MBCS;_DEBUG;OUTSIDE_SPEEX;__LITTLE_ENDIAN__;HAVE_CONFIG_H;WIN32;_LIB;TARGET_OS_WINDOWS;_CRT_SECURE_NO_WARNINGS>
)

# Minimal rebuild
if (MSVC)
  target_compile_options(MediaToolsLib PRIVATE
    "$<$<CONFIG:Debug>:/Gm->"
  )
endif ()

# Multi-processor compilation
if (MSVC)
  target_compile_options(MediaToolsLib PRIVATE
    "$<$<CONFIG:Debug>:/MP>"
  )
endif ()

# Precompiled header files
if (MSVC)
  target_compile_options(MediaToolsLib PRIVATE
    ""
  )
endif ()
